"use strict";

$(document).ready(function() {
    var t = $(document).find(".result");
    "/frontend" == window.location.pathname && $.ajax({
        method: "POST",
        url: "/request"
    }).done(function(e) {
        for (var n in e) {
            if ($(t[0]).append("\n\t\t\t\t\t\t<div class='result__line'>\n\t\t\t\t\t\t\t<div class='result__column'>" + e[n].Imei + "</div>\n\t\t\t\t\t\t\t<div class='result__column'>" + e[n].CurrentDateTime + "</div>\n\t\t\t\t\t\t\t<div class='result__column'>" + e[n].GPSDateTime + "</div>\n\t\t\t\t\t\t\t<div class='result__column'>" + e[n].Datatype + "</div>\n\t\t\t\t\t\t\t<div class='result__column'>" + e[n].Address + "</div>\n\t\t\t\t\t\t\t<div class='result__column'>" + e[n].Distance + "</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t"), 
            1 == e[n].Datatype) var i = e[n].Distance, s = e[n].CurrentDateTime;
            if (2 == e[n].Datatype) {
                var a = (l = new Date(new Date(e[n].CurrentDateTime) - new Date(s))).getHours() - 2, d = l.getMinutes();
                d < 0 && (d = -d), String(d).length < 2 && (d = "0" + String(d));
                var l = a + ":" + d;
                $(t[1]).append("\n\t\t\t\t\t\t<div class='result__line'>\n\t\t\t\t\t\t\t<div class='result__column'>" + l + "</div>\n\t\t\t\t\t\t\t<div class='result__column'>" + e[n].Datatype + "</div>\n\t\t\t\t\t\t\t<div class='result__column'>" + e[n].Address + "</div>\n\t\t\t\t\t\t\t<div class='result__column'>" + (e[n].Distance - i) + "</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t");
            }
        }
    });
    var e = $(document).find(".switcher").find(".switcher__item"), n = $(document).find(".tab");
    e.each(function(t) {
        $(this).click(function() {
            e.removeClass("active"), n.removeClass("active"), $(this).addClass("active"), $(n[t]).addClass("active");
        });
    });
});